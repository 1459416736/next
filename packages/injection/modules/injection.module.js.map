{"version":3,"sources":["modules/injection.module.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,iDAA6C;AAC7C,oCAAmE;AACnE,uCAAgE;AAChE,mDAAuD;AACvD,oCAA6C;AAC7C,yDAAqD;AACrD,8CAAmD;AACnD,iDAAmD;AACnD,yDAAqD;AACrD,2CAAoD;AACpD,0CAA+C;AAC/C,mEAA+D;AAC/D,mDAA+C;AAE/C,+CAA2C;AAC3C,2EAAuE;AACvE,uCAA0C;AAC1C,uCAAyC;AACzC,4CAAkG;AA+BlG,IAAa,eAAe,GAA5B;IACI,YACqB,UAAsB,EACtB,QAAoB,EACpB,MAAgB,EAChB,cAA8B,EAC9B,SAAoB,EACpB,WAAwB;QALxB,eAAU,GAAV,UAAU,CAAY;QACtB,aAAQ,GAAR,QAAQ,CAAY;QACpB,WAAM,GAAN,MAAM,CAAU;QAChB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,cAAS,GAAT,SAAS,CAAW;QACpB,gBAAW,GAAX,WAAW,CAAa;IAE7C,CAAC;IAED,YAAY;QACR,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAa,CAAC,CAAC;QACpC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,0BAAe,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EACxB,CAAC,CAAC;IACP,CAAC;CACJ,CAAA;AAnBY,eAAe;IA7B3B,eAAM,CAAC;QACJ,UAAU,EAAE;YACR,GAAG,0BAAe;YAClB,GAAG,wBAAa;YAChB,kBAAU;YACV,yBAAiB;YACjB,+BAAkB;YAClB,sBAAc;YACd,2BAAgB;YAChB,mBAAW;SACd;QACD,OAAO,EAAE;YACL,2BAAgB;SACnB;QACD,OAAO,EAAE;YACL,GAAG,mCAAuB,EAAE;YAC5B,GAAG,gCAAoB,EAAE;YACzB,GAAG,+BAAmB,EAAE;YACxB,mBAAU,CAAC,GAAG,EAAE,CAAC,kCAAe,CAAC;YACjC,mBAAU,CAAC,GAAG,EAAE,CAAC,4BAAY,CAAC;YAC9B,mBAAU,CAAC,GAAG,EAAE,CAAC,0BAAW,CAAC;YAC7B,iBAAU;YACV,kCAAe;YACf,0BAAW;YACX,wBAAU;YACV,8BAAa;YACb,iBAAU;SACb;KACJ,CAAC;qCAGmC,kBAAU;QACZ,iBAAU;QACZ,eAAQ;QACA,sBAAc;QACnB,gBAAS;QACP,mBAAW;GAPpC,eAAe,CAmB3B;AAnBY,0CAAe","file":"injection.module.js","sourcesContent":["import { AddonModule } from \"./addon.module\";\nimport { AddonSagas, ExtensionSagas, ModuleSagas } from \"../sagas\";\nimport { CommandBus, CQRSModule, EventBus } from \"@nestjs/cqrs\";\nimport { commandHandlers } from \"../commands/handlers\";\nimport { ConfigurationPage } from \"../pages\";\nimport { DashboardModule } from \"./dashboard.module\";\nimport { DeveloperDashboard } from \"../dashboards\";\nimport { eventHandlers } from \"../events/handlers\";\nimport { ExtensionModule } from \"./extension.module\";\nimport { forwardRef, Module } from \"@nestjs/common\";\nimport { InjectionService } from \"../services\";\nimport { LocalModule } from \"@notadd/addon-local/local.module\";\nimport { ModuleModule } from \"./module.module\";\nimport { OnModuleInit } from \"@nestjs/common/interfaces/modules\";\nimport { PageModule } from \"./page.module\";\nimport { SettingModule } from \"@notadd/setting/modules/setting.module\";\nimport { UserModule } from \"@notadd/user\";\nimport { ModuleRef } from \"@nestjs/core\";\nimport { loadAddonsFromFiles, loadExtensionsFromFiles, loadModulesFromFiles } from \"../utilities\";\n\n@Module({\n    components: [\n        ...commandHandlers,\n        ...eventHandlers,\n        AddonSagas,\n        ConfigurationPage,\n        DeveloperDashboard,\n        ExtensionSagas,\n        InjectionService,\n        ModuleSagas,\n    ],\n    exports: [\n        InjectionService,\n    ],\n    imports: [\n        ...loadExtensionsFromFiles(),\n        ...loadModulesFromFiles(),\n        ...loadAddonsFromFiles(),\n        forwardRef(() => ExtensionModule),\n        forwardRef(() => ModuleModule),\n        forwardRef(() => AddonModule),\n        CQRSModule,\n        DashboardModule,\n        LocalModule,\n        PageModule,\n        SettingModule,\n        UserModule,\n    ],\n})\nexport class InjectionModule implements OnModuleInit {\n    constructor(\n        private readonly addonSagas: AddonSagas,\n        private readonly command$: CommandBus,\n        private readonly event$: EventBus,\n        private readonly extensionSagas: ExtensionSagas,\n        private readonly moduleRef: ModuleRef,\n        private readonly moduleSagas: ModuleSagas,\n    ) {\n    }\n\n    onModuleInit() {\n        this.command$.setModuleRef(this.moduleRef);\n        this.event$.setModuleRef(this.moduleRef);\n        this.event$.register(eventHandlers);\n        this.command$.register(commandHandlers);\n        this.event$.combineSagas([\n        ]);\n    }\n}\n"]}