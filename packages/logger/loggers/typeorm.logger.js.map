{"version":3,"sources":["loggers/typeorm.logger.ts"],"names":[],"mappings":";;AAAA,2BAAoC;AACpC,kDAAqD;AACrD,0DAAuD;AAEvD,mBAA2B,SAAQ,uBAAU;IAI/B,KAAK,CAAC,OAA+B;QAC3C,OAAO,GAAG,OAAO,YAAY,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;QAEzD,MAAM,aAAa,GAAG,uBAAa,CAAC,4BAA4B,EAAE,CAAC;QACnE,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;QAClC,MAAM,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,kBAAkB,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC;QAErG,OAAO,GAAI,OAAyB,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;QACzF,mBAAc,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;IACxD,CAAC;CACJ;AAdD,sCAcC","file":"typeorm.logger.js","sourcesContent":["import { appendFileSync } from \"fs\";\nimport { Configuration } from \"@notadd/core/loaders\";\nimport { FileLogger } from \"typeorm/logger/FileLogger\";\n\nexport class TypeormLogger extends FileLogger {\n    /**\n     * @param { string | string[] } strings\n     */\n    protected write(strings: string | Array<string>) {\n        strings = strings instanceof Array ? strings : [strings];\n\n        const configuration = Configuration.loadApplicationConfiguration();\n        const date = new Date(Date.now());\n        const file = `${process.cwd()}/storages/logs/${date.toLocaleDateString(configuration.timezone)}.log`;\n\n        strings = (strings as Array<string>).map(str => \"[\" + date.toLocaleString() + \"]\" + str);\n        appendFileSync(file, strings.join(\"\\r\\n\") + \"\\r\\n\");\n    }\n}\n"]}